$(document).ready(function(){function a(){var a=$("#user-nav > ul").width();$("#user-nav > ul").css({width:a,"margin-left":"-"+a/2+"px"});var b=$("#content-header .btn-group").width();$("#content-header .btn-group").css({width:b,"margin-left":"-"+a/2+"px"})}$(".submenu > a").click(function(a){a.preventDefault();var b=$(this).siblings("ul"),c=$(this).parents("li"),d=$("#sidebar li.submenu ul"),e=$("#sidebar li.submenu");c.hasClass("open")?($(window).width()>768||$(window).width()<479?b.slideUp():b.fadeOut(250),c.removeClass("open")):($(window).width()>768||$(window).width()<479?(d.slideUp(),b.slideDown()):(d.fadeOut(250),b.fadeIn(250)),e.removeClass("open"),c.addClass("open"))});var b=$("#sidebar > ul");$("#sidebar > a").click(function(a){a.preventDefault();var c=$("#sidebar");c.hasClass("open")?(c.removeClass("open"),b.slideUp(250)):(c.addClass("open"),b.slideDown(250))}),$(window).resize(function(){$(window).width()>479&&(b.css({display:"block"}),$("#content-header .btn-group").css({width:"auto"})),$(window).width()<479&&(b.css({display:"none"}),a()),$(window).width()>768&&($("#user-nav > ul").css({width:"auto",margin:"0"}),$("#content-header .btn-group").css({width:"auto"}))}),$(window).width()<468&&(b.css({display:"none"}),a()),$(window).width()>479&&($("#content-header .btn-group").css({width:"auto"}),b.css({display:"block"})),$(".tip").tooltip(),$(".tip-left").tooltip({placement:"left"}),$(".tip-right").tooltip({placement:"right"}),$(".tip-top").tooltip({placement:"top"}),$(".tip-bottom").tooltip({placement:"bottom"}),$("#search input[type=text]").typeahead({source:["Dashboard","Form elements","Common Elements","Validation","Wizard","Buttons","Icons","Interface elements","Support","Calendar","Gallery","Reports","Charts","Graphs","Widgets"],items:4}),$("#style-switcher i").click(function(){$(this).hasClass("open")?($(this).parent().animate({marginRight:"-=190"}),$(this).removeClass("open")):($(this).parent().animate({marginRight:"+=190"}),$(this).addClass("open")),$(this).toggleClass("icon-arrow-left"),$(this).toggleClass("icon-arrow-right")}),$("#style-switcher a").click(function(){var a=$(this).attr("href").replace("#","");$(".skin-color").attr("href","css/unicorn."+a+".css"),$(this).siblings("a").css({"border-color":"transparent"}),$(this).css({"border-color":"#aaaaaa"})})}),angular.module("adScreenMonitor",["ngRoute"]).config(["$locationProvider",function(a){a.html5Mode(!1)}]).config(["$routeProvider",function(a){a.when("/",{redirectTo:"/ad-screen"}).when("/screen-group",{templateUrl:"views/screen-group.html",controller:"ScreenGroupController"}).when("/ad-screen/:group",{templateUrl:"views/ad-screen.html",controller:"AdScreenController"}).when("/ad-screen",{templateUrl:"views/ad-screen.html",controller:"AdScreenController"}).when("/screen-ad",{templateUrl:"views/screen-ad.html",controller:"ScreenAdController"}).when("/screen-ad-edit",{templateUrl:"views/screen-ad-edit.html",controller:"ScreenAdEditController"}).when("/screen-ad-edit/:aid",{templateUrl:"views/screen-ad-edit.html",controller:"ScreenAdEditController"}).when("/ad-report",{templateUrl:"views/ad-report.html",controller:"AdReportController"}).otherwise({redirectTo:"/ad-screen"})}]),angular.module("adScreenMonitor").factory("adScreenService",function(){var a=[{id:"1",title:"广告屏终端1",description:"广告屏终端1是第1个广告屏终端",group:"1"},{id:"2",title:"广告屏终端2",description:"广告屏终端2是第2个广告屏终端",group:"2"},{id:"3",title:"广告屏终端3",description:"广告屏终端3是第3个广告屏终端",group:"3"},{id:"4",title:"广告屏终端4",description:"广告屏终端4是第4个广告屏终端",group:"1"},{id:"5",title:"广告屏终端5",description:"广告屏终端5是第5个广告屏终端",group:"2"}];return{getList:function(){return a},addItem:function(b){a.push(b)},updateItem:function(b){var c;for(c=0;c<a.length;c++)if(a[c].id===b.id)return void(a[c]=b)},getItem:function(){return{id:"",title:"",description:"",group:"1"}}}}),angular.module("adScreenMonitor").factory("screenGroupService",function(){var a=[{id:"1",title:"广告屏终端组1",description:"广告屏终端组1是第1个广告屏终端组"},{id:"2",title:"广告屏终端组2",description:"广告屏终端组2是第2个广告屏终端组"},{id:"3",title:"广告屏终端组3",description:"广告屏终端组3是第3个广告屏终端组"},{id:"4",title:"广告屏终端组4",description:"广告屏终端组4是第4个广告屏终端组"},{id:"5",title:"广告屏终端组5",description:"广告屏终端组5是第5个广告屏终端组"}];return{getList:function(){return a},addItem:function(b){a.push(b)},updateItem:function(b){var c;for(c=0;c<a.length;c++)if(a[c].id===b.id)return void(a[c]=b)},getItem:function(){return{id:"",title:"",description:""}}}}),angular.module("adScreenMonitor").factory("screenAdService",function(){}),angular.module("adScreenMonitor").factory("adScreenFilterService",function(){return{filters:{}}}),angular.module("adScreenMonitor").directive("fileupload",function(){return{restrict:"A",scope:{done:"&",progress:"&"},link:function(a,b,c){console.log(c);var d={dataType:"json"};a.done&&(d.done=function(){a.$apply(function(b,c){a.done({e:b,data:c})})}),a.progress&&(d.progress=function(b,c){a.$apply(function(){a.progress({e:b,data:c})})}),b.fileupload(d)}}}),angular.module("adScreenMonitor").directive("datepicker",function(){return{restrict:"A",require:"?ngModel",scope:!0,link:function(a,b,c,d){if(d){var e={};e.dateFormat="yy-mm-dd";var f=function(b){a.$apply(function(){d.$setViewValue(b)})};e.onSelect=function(b,c){console.log(c),f(b),a.select&&a.$apply(function(){a.select({date:b})})},d.$render=function(){b.datepicker("setDate",d.$viewValue||"")},b.datepicker(e),console.log(c)}}}}),angular.module("adScreenMonitor").directive("datetimepicker",function(){return{restrict:"A",require:"?ngModel",scope:{select:"&"},link:function(a,b,c,d){if(d){var e={};e.dateFormat="yy-mm-dd";var f=function(b){a.$apply(function(){d.$setViewValue(b)})};e.onSelect=function(b,c){console.log(c),f(b),a.select&&a.$apply(function(){a.select({date:b})})},d.$render=function(){b.datepicker("setDate",d.$viewValue||"")},b.datetimepicker(e),console.log(c)}}}}),angular.module("adScreenMonitor").directive("literal",function(){return{restrict:"E",scope:{select:"&"},replace:!0,link:function(a,b,c){console.log(c),console.log(b)}}}),angular.module("adScreenMonitor").directive("jqGrid",function(){return{restrict:"A",scope:{options:"&"},link:function(a,b,c){var d=function(){return{}};a.options&&(d=a.options());var e=d(b),f="";c.url&&(e.url=c.url),c.datatype&&(e.datatype=c.datatype),c.pager&&(f=e.pager=c.pager),b.jqGrid(e),f&&b.jqGrid("navGrid",f,{edit:!1,add:!1,del:!1})}}}),angular.module("adScreenMonitor").controller("MainController",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("adScreenMonitor").controller("HomeController",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("adScreenMonitor").controller("SideNavController",["$scope",function(a){var b=[{title:"广告屏管理",url:"#",active:!1,open:!1,items:[{title:"终端组",url:"#/screen-group",active:!1},{title:"终端管理",url:"#/ad-screen",active:!1},{title:"广告管理",url:"#/screen-ad",active:!1},{title:"添加广告",url:"#/screen-ad-edit",active:!1}]}];b.length&&(b[0].active=b[0].open=!0),a.items=b}]),angular.module("adScreenMonitor").controller("ScreenGroupController",["$scope",function(a){a.state={editing:!1},a.current={item:{}}}]),angular.module("adScreenMonitor").controller("ScreenGroupEditController",["$scope","screenGroupService",function(a,b){a.submitEdit=function(){a.state.editing=!1,a.current.item.id?b.updateItem(a.current.item):b.addItem(a.current.item)},a.cancelEdit=function(){a.state.editing=!1}}]),angular.module("adScreenMonitor").controller("ScreenGroupListController",["$scope","screenGroupService",function(a,b){a.items=b.getList(),a.showEditor=function(c){var d=window._;c=c||b.getItem(0),a.current.item=d.clone(c),a.state.editing=!0}}]),angular.module("adScreenMonitor").controller("AdScreenController",["$scope","$routeParams",function(a,b){var c=0;b.hasOwnProperty("group")&&(c=b.group),a.group=c,a.state={editing:!1},a.current={item:{}}}]),angular.module("adScreenMonitor").controller("AdScreenListController",["$scope","adScreenService","adScreenFilterService",function(a,b,c){a.items=b.getList(),a.adScreenFilterService=c,a.showEditor=function(c){var d=window._;c=c||b.getItem(0),a.current.item=d.clone(c),a.state.editing=!0}}]),angular.module("adScreenMonitor").controller("AdScreenFilterController",["$scope","screenGroupService","adScreenFilterService",function(a,b,c){var d=b.getList();if(a.items=d,a.adScreenFilterService=c,d.length){var e=d[0].id;a.group&&(e=a.group),c.filters.group=e}}]),angular.module("adScreenMonitor").controller("AdScreenEditController",["$scope","adScreenService",function(a,b){a.submitEdit=function(){a.state.editing=!1,a.current.item.id?b.updateItem(a.current.item):b.addItem(a.current.item)},a.cancelEdit=function(){a.state.editing=!1}}]),angular.module("adScreenMonitor").controller("ScreenAdController",["$scope",function(a){function b(a,b,c,d){var e=[];for(var f in b)b.hasOwnProperty(f)&&e.push([f,b[f]].join("="));var h='<a <%= attrs %> class="<%= classes %>" data-toggle="tooltip" data-placement="top" title="<%= title %>"></a>';c.push("action"),c.push("glyphicon");var i={title:d,attrs:e.join(" "),classes:c.join(" ")},j=g.template(h);a.push(j(i))}function c(a){console.log(a)}function d(a){var b={spu:a,type:"start"};c(b)}function e(a){var b={spu:a,type:"pause"};c(b)}var f=window.$,g=window._;a.getGridOptions=function(){return function(a){return{colNames:["id","广告主题","开始投放","结束投放","","active"],colModel:[{name:"id",hidden:!0},{name:"title",index:"title",width:500,align:"left"},{name:"start",index:"start",width:120,align:"center"},{name:"end",index:"end",width:120,align:"center"},{name:"action",index:"action",width:100,align:"center"},{name:"active",index:"active",hidden:!0}],loadComplete:function(){var c,g,h=a.jqGrid("getDataIDs");for(c=0;c<h.length;c++){g=a.jqGrid("getRowData",h[c]);var i=[],j=g.id||"",k=g.active||0;b(i,{href:"#/ad-report"},["icon-eye-open","icon"],"查看广告投放报表"),b(i,{href:"#/screen-ad-edit/"+j},["icon-edit","icon"],"修改广告信息"),1*k?b(i,{id:j,active:"1"},["icon-pause","icon"],"暂停广告投放"):b(i,{id:j,active:"0"},["icon-play","icon"],"激活广告投放"),a.jqGrid("setRowData",h[c],{action:i.join("")})}f("span[active=0]",a).click(function(){d(f(this).attr("id"))}),f("span[active=1]",a).click(function(){e(f(this).attr("id"))}),f('span[data-toggle="tooltip"]').tooltip({})},width:"100%",height:"100%",rowNum:20,rowList:[20,30,50],viewrecords:!1,hidegrid:!1}}}}]),angular.module("adScreenMonitor").controller("ScreenAdEditController",["$scope",function(a){a.current={item:{}}}]),angular.module("adScreenMonitor").controller("ScreenAdEditBasicController",["$scope",function(a){var b=[{name:"carousel",description:"1#轮播位置"},{name:"fix",description:"2#固定位置"},{name:"scroll",description:"3#滚动位置"}],c={carousel:[{name:"image",description:"图片物料（宽高比4：3）"},{name:"video",description:"MP4视频物料（宽高比4：3）"}],fix:[{name:"image",description:"图片物料（宽高比2：3）"}],scroll:[{name:"text",description:"文本广告（少于25字）"}]},d=b[0].name,e=c[d];a.current.item.slotType=d,a.slotTypes=b,a.materielTypes=e,a.changeSlotType=function(){var b=a.current.item.slotType;a.materielTypes=c[b]},a.uploadFinished=function(a,b){console.log(a),console.log(b)}}]),angular.module("adScreenMonitor").controller("ScreenAdEditStrategyController",["$scope","screenGroupService","adScreenService",function(a,b,c){a.screenGroups=b.getList(),a.adScreens=c.getList()}]),angular.module("adScreenMonitor").controller("ScreenAdFilterController",["$scope","screenGroupService","adScreenService",function(a,b,c){a.screenGroups=b.getList(),a.adScreens=c.getList()}]),angular.module("adScreenMonitor").controller("AdReportController",["$scope",function(a){a.echartsData={},a.getEChartsOptions=function(){},a.getGridOptions=function(){return function(){return{colNames:["id","广告主题","广告位置","物料类型","投放量"],colModel:[{name:"id",hidden:!0},{name:"title",index:"title",width:500,align:"left"},{name:"slotType",index:"slotType",width:120,align:"right"},{name:"materielType",index:"end",width:150,align:"right"},{name:"push",index:"push",width:100,align:"right"}],width:"100%",height:"100%",rowNum:20,rowList:[20,30,50],viewrecords:!1,hidegrid:!1}}}}]),angular.module("adScreenMonitor").directive("echarts",function(){return{restrict:"A",scope:{options:"&"},link:function(a,b,c){console.log(a),console.log(b),console.log(c)}}}),angular.module("adScreenMonitor").service("adReportService",function(){return{getReport:function(){return{}}}});